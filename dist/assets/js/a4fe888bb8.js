(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"502U":function(t,e,s){"use strict";var i=s("vDqi"),n=s.n(i);e.a=n.a.create({baseURL:"https://aurelion.pl/"})},"56mm":function(t,e,s){"use strict";s("y2R0")},"858I":function(t,e,s){"use strict";s("bXqX")},"8Lnp":function(t,e,s){"use strict";s("ZkS4")},NfID:function(t,e,s){},NwkG:function(t,e,s){"use strict";s.r(e);s("6cQw"),s("RDyj"),s("FNk8");var i={props:["comments"],computed:{date:()=>t=>new Date(t.date).toLocaleString()}},n=(s("poK9"),s("KHd+")),a=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"comments"},t._l(t.comments,(function(e){return s("li",{key:e.id,staticClass:"comment"},[s("span",{staticClass:"creator"},[t._v(t._s(e.creator)+" ")]),s("span",{staticClass:"date"},[t._v("("+t._s(t.date(e))+")")]),s("div",[t._v(t._s(e.text))])])})),0)}),[],!1,null,"6fb2e71c",null).exports,o=s("502U");function r(){return new Promise(t=>{grecaptcha.ready(()=>{grecaptcha.execute("6LcZEvsUAAAAACNBgqqYduHvBQuR0lAckj0z54yJ",{action:"submit"}).then(e=>{t(e)})})})}var l={props:["songId","yourName"],data:()=>({text:"",isLoading:!1}),methods:{onSubmit(t){this.isLoading||(this.isLoading=!0,r().then(t=>o.a.post("/comments",{songId:this.songId,text:this.text,creator:this.$store.state.yourName,token:t})).then(t=>{this.$emit("comment",t.data)}).finally(()=>{this.isLoading=!1,this.text=""}))}}},c=(s("jWoy"),Object(n.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[s("label",[s("div",{staticClass:"visually-hidden"},[t._v("Your comment:")]),s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.text,expression:"text",modifiers:{trim:!0}}],staticClass:"input input--textarea",attrs:{cols:"30",rows:"1",placeholder:"Write a comment...",required:"",min:"3"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("label",[s("div",{staticClass:"visually-hidden"},[t._v("Your name:")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$store.state.yourName,expression:"$store.state.yourName",modifiers:{trim:!0}}],staticClass:"input input--text",attrs:{type:"text",placeholder:"Your name",required:"",min:"3"},domProps:{value:t.$store.state.yourName},on:{input:function(e){e.target.composing||t.$set(t.$store.state,"yourName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("button",{staticClass:"music-challenge-btn btn",attrs:{type:"submit",disabled:t.isLoading}},[t._v("\n    Add comment\n  ")])])}),[],!1,null,"25fb4080",null).exports),d=(s("UIfg"),{props:["song"],data(){return{isLikesLoading:!1,isLiked:JSON.parse(localStorage.getItem("likedSongs")).includes(this.song.id)}},computed:{displayLikes(){const t=1===this.song.likes?"person likes":"people like";return this.song.likes?`${this.song.likes} ${t} this`:"No one has liked this yet!"}},methods:{likeSong(){if(this.isLikesLoading)return;this.isLikesLoading=!0;const t=JSON.parse(localStorage.getItem("likedSongs"));t.includes(this.song.id)||(t.push(this.song.id),localStorage.setItem("likedSongs",JSON.stringify(t)),this.isLiked=!0,r().then(t=>o.a.post("/likes",{songId:this.song.id,token:t})).then(t=>{const e=t.data.likes;this.song.likes=e}).finally(()=>{this.isLikesLoading=!1}))}}}),u=(s("8Lnp"),{props:["song"],components:{Comments:a,AddComment:c,Like:Object(n.a)(d,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"like-wrap"},[e("span",{staticClass:"display-likes"},[this._v("\n    "+this._s(this.displayLikes)+"\n  ")]),e("button",{staticClass:"music-challenge-btn like",on:{click:this.likeSong}},[e("svg",{staticClass:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12 4.435c-1.989-5.399-12-4.597-12 3.568 0 4.068 3.06 9.481 12 14.997 8.94-5.516 12-10.929 12-14.997 0-8.118-10-8.999-12-3.568z"}})]),e("span",{staticClass:"like-text"},[this._v("\n    "+this._s(this.isLiked?"Liked!":"Like")+"\n  ")])])])}),[],!1,null,"a6c9d952",null).exports},data:()=>({showIframe:!1}),computed:{videoId(){return(this.song.link.match(/v=([^&|$|#]+)/)||[])[1]||(this.song.link.match(/https\:\/\/youtu\.be\/(.*)/)||[])[1]},date(){return new Date(this.song.date).toLocaleString()}},methods:{onComment(t){this.song.comments.push(t)}}}),m=(s("858I"),Object(n.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song"},[s("h3",{staticClass:"title"},[t._v(t._s(t.song.title))]),s("div",{staticClass:"name"},[t._v("Sender: "),s("b",[t._v(t._s(t.song.creator))]),t._v(" ("+t._s(t.date)+")")]),s("p",{staticClass:"description"},[t._v(t._s(t.song.description))]),s("Like",{attrs:{song:t.song}}),t.videoId?s("iframe",{staticClass:"video",attrs:{src:"https://www.youtube.com/embed/"+t.videoId,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}):t._e(),s("Comments",{attrs:{comments:t.song.comments}}),s("AddComment",{attrs:{songId:t.song.id},on:{comment:t.onComment}})],1)}),[],!1,null,"6901e51d",null).exports),h={data:()=>({isLoading:!1,title:"",description:"",link:"",isSent:!1}),methods:{onSubmit(){this.isLoading||(this.isLoading=!0,r().then(t=>o.a.post("/songs",{title:this.title,link:this.link,description:this.description,creator:this.$store.state.yourName,day:this.$route.query.nr,token:t})).then(t=>{const e=t.data;this.$emit("songAdded",e),this.isSent=!0}).finally(()=>{this.isLoading=!1,this.title="",this.link="",this.description=""}))}}},g=(s("56mm"),{metaInfo:{script:[{src:"https://www.google.com/recaptcha/api.js?render=6LcZEvsUAAAAACNBgqqYduHvBQuR0lAckj0z54yJ"}],title:"Music Challenge - Nowicki Lab",titleTemplate:"%s"},components:{Song:m,AddSong:Object(n.a)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[s("label",{staticClass:"label"},[t._v("\n      Song title:\n      "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input",attrs:{type:"text",required:"",min:"3",placeholder:"Enter song's title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),s("br")]),s("label",{staticClass:"label"},[t._v("\n      YouTube link to song:\n      "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"link"}],staticClass:"input",attrs:{type:"url",placeholder:"Add a YouTube link to your song"},domProps:{value:t.link},on:{input:function(e){e.target.composing||(t.link=e.target.value)}}}),s("br")]),s("label",{staticClass:"label"},[t._v("\n      Why did you choose this song?\n      "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"input ",attrs:{cols:"40",rows:"5",placeholder:"Provide a short explanation"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),s("br")]),s("label",{staticClass:"label"},[t._v("\n      Your name:\n      "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.yourName,expression:"$store.state.yourName"}],staticClass:"input",attrs:{type:"text",required:"",min:"3",placeholder:"Your name"},domProps:{value:t.$store.state.yourName},on:{input:function(e){e.target.composing||t.$set(t.$store.state,"yourName",e.target.value)}}}),s("br")]),t._m(0)]),s("div",{staticClass:"status"},[t.isLoading?s("div",[t._v("\n      Sending...\n    ")]):t.isSent?s("div",[t._v("\n      Thank you for submitting your song for today's challenge! If you wish, you may\n      submit one more. Otherwise, feel free to browse and interact with other entries.\n    ")]):t._e()])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn-wrap"},[e("button",{staticClass:"music-challenge-btn",attrs:{type:"submit"}},[this._v("\n        Send your song\n      ")])])}],!1,null,"5553622a",null).exports},data:()=>({isLoading:!0,title:"",day:null}),computed:{prevLink(){return"/music-challenge/day?nr="+(this.$route.query.nr-1)},nextLink(){return"/music-challenge/day?nr="+(+this.$route.query.nr+1)}},mounted(){localStorage.getItem("likedSongs")||localStorage.setItem("likedSongs",JSON.stringify([])),this.fetchData();const t=setTimeout(()=>{this.fetchData()},6e4);this.$once("hook:beforeDestroy",()=>{clearInterval(t)})},watch:{"$route.query.nr"(){this.fetchData()}},methods:{songAdded(t){this.day.songs.unshift(t)},fetchData(){const t=window.parseFloat(this.$route.query.nr);t<1||t!==Math.floor(t)?this.$router.replace("/music-challenge/"):o.a.get("/day/"+t).then(t=>{this.day=t.data}).catch(t=>{this.$router.replace("/music-challenge/")}).finally(()=>{this.isLoading=!1})}}}),p=(s("fVAN"),Object(n.a)(g,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isLoading?s("div",[t._v("\n  Loading...\n")]):s("div",[s("div",{staticClass:"title-wrap"},[s("h2",{staticClass:"title"},[t._v("Day "+t._s(t.day.day)+": "+t._s(t.day.theme))])]),t.day.isPast?s("div",{staticClass:"past"},[s("p",[t._v("This is a past daily challenge. Posting for this topic is closed, but browsing and interacting with the archive is possible.")])]):s("AddSong",{on:{songAdded:t.songAdded}}),t.day.songs.length>0?s("div",{staticClass:"songs"},t._l(t.day.songs,(function(t){return s("Song",{key:t.id,attrs:{song:t}})})),1):s("p",{staticClass:"no-songs"},[t.day.isPast?s("span",[t._v("Unfortunately, there are "),s("b",[t._v("no songs")]),t._v(" for day "+t._s(t.day.day)+".")]):s("span",[t._v("There are "),s("b",[t._v("no songs")]),t._v(" for day "+t._s(t.day.day)+" yet. Be the first one and send your song!")])]),s("div",{staticClass:"buttons"},[s("a",{staticClass:"music-challenge-btn navigate",class:{"music-challenge-btn--disabled":1===t.day.day},attrs:{href:t.prevLink}},[s("svg",{staticClass:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z"}})]),t._v("\n      Previous day\n    ")]),s("router-link",{staticClass:"music-challenge-btn back",attrs:{to:"/music-challenge"}},[t._v("\n      Back to day list\n    ")]),s("a",{staticClass:"music-challenge-btn navigate",class:{"music-challenge-btn--disabled":!t.day.isNextDayAvailable},attrs:{href:t.nextLink}},[t._v("\n      Next day\n      "),s("svg",{staticClass:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"}})])])],1)],1)}),[],!1,null,"c19d0da6",null));e.default=p.exports},RDyj:function(t,e,s){"use strict"},ZkS4:function(t,e,s){},"af8/":function(t,e,s){},bXqX:function(t,e,s){},f0EM:function(t,e,s){},fVAN:function(t,e,s){"use strict";s("NfID")},jWoy:function(t,e,s){"use strict";s("f0EM")},poK9:function(t,e,s){"use strict";s("af8/")},y2R0:function(t,e,s){}}]);