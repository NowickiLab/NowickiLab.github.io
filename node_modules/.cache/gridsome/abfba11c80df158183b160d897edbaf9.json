{"remainingRequest":"C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\babel-loader\\lib\\index.js??ref--1-1!C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ja03\\NowickiLab.github.io\\src\\components\\music-challenge\\Like.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\ja03\\NowickiLab.github.io\\src\\components\\music-challenge\\Like.vue","mtime":1591715987800},{"path":"C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1767895345982},{"path":"C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\babel-loader\\lib\\index.js","mtime":1767895347093},{"path":"C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1767895345982},{"path":"C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\vue-loader\\lib\\index.js","mtime":1767895347956}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from '@/assets/js/music-axios';\nimport fetchToken from '@/assets/js/fetchRecaptchaToken';\nexport default {\n  props: ['song'],\n  data() {\n    return {\n      isLikesLoading: false,\n      isLiked: JSON.parse(localStorage.getItem('likedSongs')).includes(this.song.id)\n    };\n  },\n  computed: {\n    displayLikes() {\n      const ppl = this.song.likes === 1 ? 'person likes' : 'people like';\n      if (this.song.likes) return `${this.song.likes} ${ppl} this`;\n      return `No one has liked this yet!`;\n    }\n  },\n  methods: {\n    likeSong() {\n      if (this.isLikesLoading) return;\n      this.isLikesLoading = true;\n      const likedSongs = JSON.parse(localStorage.getItem('likedSongs'));\n      if (likedSongs.includes(this.song.id)) return;\n      likedSongs.push(this.song.id);\n      localStorage.setItem('likedSongs', JSON.stringify(likedSongs));\n      this.isLiked = true;\n      fetchToken().then(token => {\n        return axios.post('/likes', {\n          songId: this.song.id,\n          token\n        });\n      }).then(res => {\n        const likesNumber = res.data.likes;\n        this.song.likes = likesNumber;\n      }).finally(() => {\n        this.isLikesLoading = false;\n      });\n    }\n  }\n};",{"version":3,"names":["axios","fetchToken","props","data","isLikesLoading","isLiked","JSON","parse","localStorage","getItem","includes","song","id","computed","displayLikes","ppl","likes","methods","likeSong","likedSongs","push","setItem","stringify","then","token","post","songId","res","likesNumber","finally"],"sources":["src/components/music-challenge/Like.vue"],"sourcesContent":["<template lang=\"html\">\r\n  <div class=\"like-wrap\">\r\n    <span class=\"display-likes\">\r\n      {{ displayLikes }}\r\n    </span>\r\n    <button class=\"music-challenge-btn like\" @click=\"likeSong\">\r\n      <svg class=\"icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n        <path d=\"M12 4.435c-1.989-5.399-12-4.597-12 3.568 0 4.068 3.06 9.481 12 14.997 8.94-5.516 12-10.929 12-14.997 0-8.118-10-8.999-12-3.568z\"/>\r\n      </svg>\r\n    <span class=\"like-text\">\r\n      {{ isLiked ? 'Liked!' : 'Like' }}\r\n    </span>\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from '@/assets/js/music-axios'\r\nimport fetchToken from '@/assets/js/fetchRecaptchaToken'\r\n\r\nexport default {\r\n  props: ['song'],\r\n  data () {\r\n    return {\r\n      isLikesLoading: false,\r\n      isLiked: JSON.parse(localStorage.getItem('likedSongs')).includes(this.song.id),\r\n    }\r\n  },\r\n  computed: {\r\n    displayLikes () {\r\n      const ppl = this.song.likes === 1 ? 'person likes' : 'people like'\r\n      if (this.song.likes) return `${this.song.likes} ${ppl} this`\r\n      return `No one has liked this yet!`\r\n    },\r\n  },\r\n  methods: {\r\n    likeSong () {\r\n      if (this.isLikesLoading) return\r\n      this.isLikesLoading = true\r\n\r\n      const likedSongs = JSON.parse(localStorage.getItem('likedSongs'))\r\n      if (likedSongs.includes(this.song.id)) return\r\n      likedSongs.push(this.song.id)\r\n      localStorage.setItem('likedSongs', JSON.stringify(likedSongs))\r\n      this.isLiked = true\r\n\r\n      fetchToken().then(token => {\r\n        return axios.post('/likes', { songId: this.song.id, token })\r\n      }).then(res => {\r\n        const likesNumber = res.data.likes\r\n        this.song.likes = likesNumber\r\n      }).finally(() => {\r\n        this.isLikesLoading = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.like-wrap {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n}\r\n\r\n.display-likes {\r\n  align-self: center;\r\n}\r\n\r\n.like {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 136px;\r\n  background: #e44747;\r\n  border-color: #bb2e2e;\r\n\r\n  &:hover {\r\n    background: #bb2e2e;\r\n  }\r\n}\r\n\r\n.icon {\r\n  margin-right: 8px;\r\n}\r\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;AAiBA,OAAAA,KAAA;AACA,OAAAC,UAAA;AAEA;EACAC,KAAA;EACAC,KAAA;IACA;MACAC,cAAA;MACAC,OAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA,gBAAAC,QAAA,MAAAC,IAAA,CAAAC,EAAA;IACA;EACA;EACAC,QAAA;IACAC,aAAA;MACA,MAAAC,GAAA,QAAAJ,IAAA,CAAAK,KAAA;MACA,SAAAL,IAAA,CAAAK,KAAA,iBAAAL,IAAA,CAAAK,KAAA,IAAAD,GAAA;MACA;IACA;EACA;EACAE,OAAA;IACAC,SAAA;MACA,SAAAd,cAAA;MACA,KAAAA,cAAA;MAEA,MAAAe,UAAA,GAAAb,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACA,IAAAU,UAAA,CAAAT,QAAA,MAAAC,IAAA,CAAAC,EAAA;MACAO,UAAA,CAAAC,IAAA,MAAAT,IAAA,CAAAC,EAAA;MACAJ,YAAA,CAAAa,OAAA,eAAAf,IAAA,CAAAgB,SAAA,CAAAH,UAAA;MACA,KAAAd,OAAA;MAEAJ,UAAA,GAAAsB,IAAA,CAAAC,KAAA;QACA,OAAAxB,KAAA,CAAAyB,IAAA;UAAAC,MAAA,OAAAf,IAAA,CAAAC,EAAA;UAAAY;QAAA;MACA,GAAAD,IAAA,CAAAI,GAAA;QACA,MAAAC,WAAA,GAAAD,GAAA,CAAAxB,IAAA,CAAAa,KAAA;QACA,KAAAL,IAAA,CAAAK,KAAA,GAAAY,WAAA;MACA,GAAAC,OAAA;QACA,KAAAzB,cAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}