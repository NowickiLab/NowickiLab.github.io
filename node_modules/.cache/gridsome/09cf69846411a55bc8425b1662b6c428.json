{"remainingRequest":"C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ja03\\NowickiLab.github.io\\src\\components\\music-challenge\\AddComment.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\ja03\\NowickiLab.github.io\\src\\components\\music-challenge\\AddComment.vue","mtime":1591404174656},{"path":"C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1767895345982},{"path":"C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\babel-loader\\lib\\index.js","mtime":1767895347093},{"path":"C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1767895345982},{"path":"C:\\Users\\ja03\\NowickiLab.github.io\\node_modules\\vue-loader\\lib\\index.js","mtime":1767895347956}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport axios from '@/assets/js/music-axios'\r\nimport fetchToken from '@/assets/js/fetchRecaptchaToken'\r\n\r\nexport default {\r\n  props: ['songId', 'yourName'],\r\n  data () {\r\n    return {\r\n      text: '',\r\n      isLoading: false,\r\n    }\r\n  },\r\n  methods: {\r\n    onSubmit (e) {\r\n      if (this.isLoading) return\r\n\r\n      this.isLoading = true\r\n      fetchToken().then(token => {\r\n        return axios.post('/comments', {\r\n          songId: this.songId,\r\n          text: this.text,\r\n          creator: this.$store.state.yourName,\r\n          token\r\n        })\r\n      }).then(res => {\r\n        this.$emit('comment', res.data)\r\n      }).finally(() => {\r\n        this.isLoading = false\r\n        this.text = ''\r\n      })\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["AddComment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddComment.vue","sourceRoot":"src/components/music-challenge","sourcesContent":["<template lang=\"html\">\r\n  <form class=\"form\" @submit.prevent=\"onSubmit\">\r\n    <label>\r\n      <div class=\"visually-hidden\">Your comment:</div>\r\n      <textarea\r\n        v-model.trim=\"text\"\r\n        class=\"input input--textarea\"\r\n        cols=\"30\"\r\n        rows=\"1\"\r\n        placeholder=\"Write a comment...\"\r\n        required\r\n        min=\"3\"\r\n      />\r\n    </label>\r\n    <label>\r\n      <div class=\"visually-hidden\">Your name:</div>\r\n      <input\r\n        v-model.trim=\"$store.state.yourName\"\r\n        class=\"input input--text\"\r\n        type=\"text\"\r\n        placeholder=\"Your name\"\r\n        required\r\n        min=\"3\"\r\n      >\r\n    </label>\r\n    <button class=\"music-challenge-btn btn\" type=\"submit\" :disabled=\"isLoading\">\r\n      Add comment\r\n    </button>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport axios from '@/assets/js/music-axios'\r\nimport fetchToken from '@/assets/js/fetchRecaptchaToken'\r\n\r\nexport default {\r\n  props: ['songId', 'yourName'],\r\n  data () {\r\n    return {\r\n      text: '',\r\n      isLoading: false,\r\n    }\r\n  },\r\n  methods: {\r\n    onSubmit (e) {\r\n      if (this.isLoading) return\r\n\r\n      this.isLoading = true\r\n      fetchToken().then(token => {\r\n        return axios.post('/comments', {\r\n          songId: this.songId,\r\n          text: this.text,\r\n          creator: this.$store.state.yourName,\r\n          token\r\n        })\r\n      }).then(res => {\r\n        this.$emit('comment', res.data)\r\n      }).finally(() => {\r\n        this.isLoading = false\r\n        this.text = ''\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.form {\r\n  display: grid;\r\n  grid-template-columns: 8fr 4fr 3fr;\r\n  grid-gap: 5px;\r\n\r\n  @include mq($until: tablet) {\r\n    display: block;\r\n  }\r\n}\r\n\r\n.input {\r\n  width: 100%;\r\n  padding: 10px 8px;\r\n  border: 2px solid #ddd;\r\n  border-radius: 4px;\r\n  background: white;\r\n\r\n  &--textarea {\r\n    transition: height 0.2s;\r\n    height: 42px;\r\n\r\n    &:focus {\r\n      height: 5em;\r\n    }\r\n  }\r\n}\r\n\r\n.btn {\r\n  @include mq($until: tablet) {\r\n    width: 100%;\r\n    margin-top: 5px;\r\n  }\r\n}\r\n</style>\r\n"]}]}